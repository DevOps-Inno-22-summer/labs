## Kube Prometheus Stack

* The **Prometheus Operator** - Simplify and automate config of a Prometheus by stack monitoring for k8s clusters.
* Highly available **Prometheus** - Collect metrics
* Highly available **Alertmanager**- Managing alerts from clients application and direct it to the receivers.
* **Prometheus node-exporter** - Export os and hardware metrics
* **Prometheus Adapter for Kubernetes Metrics APIs** - Adapt data for autoscaling/v2 Horizontal Pod Autoscaler in k8s and replace metrics servers on clusters that already run Prometheus.
* **kube-state-metrics** - listens for k8s API and generate metrics about it.
* **Grafana** - visualize metrics.

```console
> kubectl get po,sts,svc,pvc,cm
NAME                                                         READY   STATUS      RESTARTS      AGE
pod/alertmanager-monitoring-kube-prometheus-alertmanager-0   2/2     Running     0             64s
pod/app-python-0                                             1/1     Running     1 (10m ago)   4d13h
pod/app-python-1                                             1/1     Running     1 (10m ago)   4d13h
pod/app-python-2                                             1/1     Running     1 (10m ago)   4d13h
pod/metric-stack-kube-promethe-admission-create-ggf8d        0/1     Completed   0             6m16s
pod/monitoring-grafana-688d796dcb-lhsfn                      3/3     Running     0             66s
pod/monitoring-kube-prometheus-operator-7cd4f8fb4d-qmzrj     1/1     Running     0             66s
pod/monitoring-kube-state-metrics-6655b64499-47r2k           1/1     Running     0             66s
pod/monitoring-prometheus-node-exporter-6jsqm                1/1     Running     0             66s
pod/prometheus-monitoring-kube-prometheus-prometheus-0       2/2     Running     0             64s

NAME                                                                    READY   AGE
statefulset.apps/alertmanager-monitoring-kube-prometheus-alertmanager   1/1     64s
statefulset.apps/app-python                                             3/3     4d13h
statefulset.apps/prometheus-monitoring-kube-prometheus-prometheus       1/1     64s

NAME                                              TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)                      AGE
service/alertmanager-operated                     ClusterIP   None             <none>        9093/TCP,9094/TCP,9094/UDP   64s
service/app-python                                ClusterIP   10.109.237.151   <none>        80/TCP                       4d13h
service/kubernetes                                ClusterIP   10.96.0.1        <none>        443/TCP                      19d
service/monitoring-grafana                        ClusterIP   10.101.189.189   <none>        80/TCP                       66s
service/monitoring-kube-prometheus-alertmanager   ClusterIP   10.105.70.123    <none>        9093/TCP                     66s
service/monitoring-kube-prometheus-operator       ClusterIP   10.111.45.212    <none>        443/TCP                      66s
service/monitoring-kube-prometheus-prometheus     ClusterIP   10.107.78.146    <none>        9090/TCP                     66s
service/monitoring-kube-state-metrics             ClusterIP   10.105.189.205   <none>        8080/TCP                     66s
service/monitoring-prometheus-node-exporter       ClusterIP   10.100.168.80    <none>        9100/TCP                     66s
service/prometheus-operated                       ClusterIP   None             <none>        9090/TCP                     64s

NAME                                        STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
persistentvolumeclaim/visits-app-python-0   Bound    pvc-1b9e386e-d11b-4a3f-9011-ec03481cdf8e   128M       RWO            standard       4d13h
persistentvolumeclaim/visits-app-python-1   Bound    pvc-510688f9-00c8-4e47-a7b7-488be1c573ee   128M       RWO            standard       4d13h
persistentvolumeclaim/visits-app-python-2   Bound    pvc-e2244a0f-7bef-4e6a-81cd-f3042e8bda4e   128M       RWO            standard       4d13h

NAME                                                                     DATA   AGE
configmap/app-python-config                                              1      4d13h
configmap/kube-root-ca.crt                                               1      19d
configmap/monitoring-grafana                                             1      66s
configmap/monitoring-grafana-config-dashboards                           1      66s
configmap/monitoring-grafana-test                                        1      66s
configmap/monitoring-kube-prometheus-alertmanager-overview               1      66s
configmap/monitoring-kube-prometheus-apiserver                           1      66s
configmap/monitoring-kube-prometheus-cluster-total                       1      66s
configmap/monitoring-kube-prometheus-controller-manager                  1      66s
configmap/monitoring-kube-prometheus-etcd                                1      66s
configmap/monitoring-kube-prometheus-grafana-datasource                  1      66s
configmap/monitoring-kube-prometheus-grafana-overview                    1      66s
configmap/monitoring-kube-prometheus-k8s-coredns                         1      66s
configmap/monitoring-kube-prometheus-k8s-resources-cluster               1      66s
configmap/monitoring-kube-prometheus-k8s-resources-namespace             1      66s
configmap/monitoring-kube-prometheus-k8s-resources-node                  1      66s
configmap/monitoring-kube-prometheus-k8s-resources-pod                   1      66s
configmap/monitoring-kube-prometheus-k8s-resources-workload              1      66s
configmap/monitoring-kube-prometheus-k8s-resources-workloads-namespace   1      66s
configmap/monitoring-kube-prometheus-kubelet                             1      66s
configmap/monitoring-kube-prometheus-namespace-by-pod                    1      66s
configmap/monitoring-kube-prometheus-namespace-by-workload               1      66s
configmap/monitoring-kube-prometheus-node-cluster-rsrc-use               1      66s
configmap/monitoring-kube-prometheus-node-rsrc-use                       1      66s
configmap/monitoring-kube-prometheus-nodes                               1      66s
configmap/monitoring-kube-prometheus-nodes-darwin                        1      66s
configmap/monitoring-kube-prometheus-persistentvolumesusage              1      66s
configmap/monitoring-kube-prometheus-pod-total                           1      66s
configmap/monitoring-kube-prometheus-prometheus                          1      66s
configmap/monitoring-kube-prometheus-proxy                               1      66s
configmap/monitoring-kube-prometheus-scheduler                           1      66s
configmap/monitoring-kube-prometheus-workload-total                      1      66s
configmap/prometheus-monitoring-kube-prometheus-prometheus-rulefiles-0   29     64s
```


```kubectl get po,sts,svc,pvc,cm``` - request to show list of pods, stateful sets, services, config maps, percictent volume claims 


